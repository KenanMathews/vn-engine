# File: templates/character_story_template.yaml
# Description: Deep dive into a character's backstory

dlc_character_flashback:
  - text: "{{getVar 'companion.name' 'Your companion'}} grows quiet as you pass the old ruins."
  - if: hasFlag('companion_trust_high')
    then:
      - speaker: "{{getVar 'companion.name'}}"
        text: "I... I used to live here, long ago."
        actions:
          - type: setFlag
            flag: backstory_revealed
      - goto: dlc_backstory_deep
    else:
      - speaker: "{{getVar 'companion.name'}}"
        text: "This place brings back memories..."
      - goto: dlc_backstory_surface

dlc_backstory_surface:
  - text: "Your companion seems reluctant to share more."
  - speaker: "{{getVar 'companion.name'}}"
    text: "Perhaps I'll tell you about it someday, when we know each other better."
    choices:
      - text: "I understand. Take your time."
        actions:
          - type: addVar
            key: companion.trust
            value: 5
      - text: "Come on, we're friends now!"
        actions:
          - type: addVar
            key: companion.trust
            value: 2

dlc_backstory_deep:
  - speaker: "{{getVar 'companion.name'}}"
    text: "My family lived in these ruins when they were still a thriving village."
  - text: "Their voice carries the weight of old pain."
  - speaker: "{{getVar 'companion.name'}}"
    text: "One night, raiders came. I was the only one who escaped."
    actions:
      - type: setVar
        key: companion.backstory_known
        value: "tragic_past"
  - text: "You place a comforting hand on their shoulder."
  - speaker: "{{getVar 'player.name' 'Hero'}}"
    text: "I'm sorry. Thank you for trusting me with this."
    choices:
      - text: "Your past doesn't define you."
        actions:
          - type: addVar
            key: companion.trust
            value: 15
          - type: setFlag
            flag: companion_inspired
      - text: "We'll make sure nothing like that happens again."
        actions:
          - type: addVar
            key: companion.trust
            value: 10
          - type: setFlag
            flag: companion_protected