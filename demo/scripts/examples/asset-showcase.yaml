setup:
  - actions:
      - type: setVar
        key: gameAssets
        value:
          - id: "hero_portrait"
            name: "hero.png"
            url: "https://picsum.photos/300/400?random=1"
            size: 45000
            category: "portrait"
          - id: "villain_portrait"  
            name: "villain.png"
            url: "https://picsum.photos/300/400?random=2"
            size: 48000
            category: "portrait"
          - id: "castle_bg"
            name: "castle.jpg"
            url: "https://picsum.photos/800/600?random=3"
            size: 220000
            category: "background"
          - id: "forest_bg"
            name: "forest.jpg" 
            url: "https://picsum.photos/800/600?random=4"
            size: 180000
            category: "background"
          - id: "theme_music"
            name: "theme.mp3"
            url: "https://www.soundjay.com/misc/bell-ringing-05.wav"
            size: 85000
            category: "audio"
          - id: "sword_sound"
            name: "sword.wav"
            url: "https://www.soundjay.com/misc/bell-ringing-04.wav"
            size: 32000
            category: "audio"

intro:
  - "ğŸ¨ **Asset Management Demo**"
  - "Welcome to the VN Engine asset system with working URLs!"
  
  - "ğŸ“Š **Asset Library Status:**"
  - "â€¢ Total Assets: {{assetCount gameAssets}}"
  - "â€¢ Storage Used: {{formatFileSize 610000}}"
  
  - "All assets use real, working URLs that will load properly."
  
  - text: "What would you like to explore?"
    choices:
      - text: "Character Portraits"
        goto: character_test
      - text: "Background Images"
        goto: background_test
      - text: "Audio System"
        goto: audio_test
      - text: "Asset Information"
        goto: asset_info_test
      - text: "Asset Validation"
        goto: validation_test

character_test:
  - "ğŸ‘¤ **Character Portrait System**"
  
  - "Testing hero portrait..."
  - "Asset exists: {{#hasAsset 'hero_portrait' gameAssets}}âœ… Yes{{else}}âŒ No{{/hasAsset}}"
  
  - "{{showImage 'hero_portrait' gameAssets 'Hero Character' 'character-portrait'}}"
  - speaker: "Hero"
    say: "Greetings! My portrait loaded from a real URL using Picsum Photos."
  
  - "Testing villain portrait..."
  - "{{showImage 'villain_portrait' gameAssets 'Villain Character' 'character-portrait'}}"
  - speaker: "Villain"
    say: "Excellent! Each character gets a unique image from the service."
  
  - "âœ… Character portraits loading successfully!"
  - goto: main_menu

background_test:
  - "ğŸ° **Background Image System**"
  
  - "Setting castle background..."
  - "{{showImage 'castle_bg' gameAssets 'Castle Scene' 'scene-background'}}"
  - "You stand before an imposing structure (random image from Picsum)."
  
  - text: "Change to forest scene?"
    choices:
      - text: "Yes, go to forest"
        goto: forest_scene
      - text: "Stay here"
        goto: main_menu

forest_scene:
  - "{{showImage 'forest_bg' gameAssets 'Forest Path' 'scene-background'}}"
  - "ğŸŒ² You venture into a mysterious landscape..."
  - "The background changed seamlessly with a new random image!"
  - goto: main_menu

audio_test:
  - "ğŸµ **Audio Asset System**"
  
  - "Testing audio assets with real sound files..."
  
  - text: "Which audio would you like to test?"
    choices:
      - text: "Play background music"
        goto: play_music
      - text: "Play sound effect"
        goto: play_sfx
      - text: "Audio information only"
        goto: audio_info

play_music:
  - "{{playAudio 'theme_music' gameAssets true true}}"
  - "ğŸµ Background music is now playing!"
  - "â€¢ File: Bell ringing sound (looped)"
  - "â€¢ Auto-play: âœ… Enabled"
  - "â€¢ Loop: âœ… Enabled"
  - "â€¢ Size: {{formatFileSize 85000}}"
  - goto: main_menu

play_sfx:
  - "{{playAudio 'sword_sound' gameAssets true false}}"
  - "âš”ï¸ Sound effect played!"
  - "â€¢ File: Bell ringing (single play)"
  - "â€¢ Auto-play: âœ… Enabled"
  - "â€¢ Loop: âŒ Disabled"
  - "â€¢ Size: {{formatFileSize 32000}}"
  - goto: main_menu

audio_info:
  - "ğŸµ **Audio Asset Information**"
  - "Theme Music:"
  - "â€¢ Type: {{getMediaType 'theme.mp3'}}"
  - "â€¢ Size: {{formatFileSize 85000}}"
  - "â€¢ Valid: {{#validateAsset 'theme_music' gameAssets}}âœ…{{else}}âŒ{{/validateAsset}}"
  - "â€¢ URL: {{#if (resolveAsset 'theme_music' gameAssets)}}âœ… Available{{else}}âŒ Missing{{/if}}"
  
  - "Sword Sound:"
  - "â€¢ Type: {{getMediaType 'sword.wav'}}"
  - "â€¢ Size: {{formatFileSize 32000}}"
  - "â€¢ Valid: {{#validateAsset 'sword_sound' gameAssets}}âœ…{{else}}âŒ{{/validateAsset}}"
  - "â€¢ URL: {{#if (resolveAsset 'sword_sound' gameAssets)}}âœ… Available{{else}}âŒ Missing{{/if}}"
  - goto: main_menu

asset_info_test:
  - "ğŸ“‹ **Asset Information System**"
  
  - "=== Individual Asset Details ==="
  - "Hero Portrait:"
  - "â€¢ Type: {{getMediaType 'hero.png'}}"
  - "â€¢ Size: {{formatFileSize 45000}}"
  - "â€¢ Valid: {{#validateAsset 'hero_portrait' gameAssets}}âœ…{{else}}âŒ{{/validateAsset}}"
  - "â€¢ URL: Real Picsum photo service"
  
  - "Castle Background:"
  - "â€¢ Type: {{getMediaType 'castle.jpg'}}"
  - "â€¢ Size: {{formatFileSize 220000}}"
  - "â€¢ Valid: {{#validateAsset 'castle_bg' gameAssets}}âœ…{{else}}âŒ{{/validateAsset}}"
  - "â€¢ URL: Real Picsum photo service"
  
  - "=== Key Normalization Test ==="
  - "Original: 'Hero Portrait.PNG'"
  - "Normalized: {{normalizeKey 'Hero Portrait.PNG'}}"
  
  - "=== File Size Tests ==="
  - "1 KB: {{formatFileSize 1024}}"
  - "1 MB: {{formatFileSize 1048576}}"
  - "Custom: {{formatFileSize 1536}} (1.5 KB)"
  
  - goto: main_menu

validation_test:
  - "ğŸ” **Asset Validation System**"
  
  - "=== Checking All Assets ==="
  - "Hero Portrait: {{#validateAsset 'hero_portrait' gameAssets}}âœ… Valid{{else}}âŒ Invalid{{/validateAsset}}"
  - "Villain Portrait: {{#validateAsset 'villain_portrait' gameAssets}}âœ… Valid{{else}}âŒ Invalid{{/validateAsset}}"
  - "Castle Background: {{#validateAsset 'castle_bg' gameAssets}}âœ… Valid{{else}}âŒ Invalid{{/validateAsset}}"
  - "Forest Background: {{#validateAsset 'forest_bg' gameAssets}}âœ… Valid{{else}}âŒ Invalid{{/validateAsset}}"
  - "Theme Music: {{#validateAsset 'theme_music' gameAssets}}âœ… Valid{{else}}âŒ Invalid{{/validateAsset}}"
  - "Sword Sound: {{#validateAsset 'sword_sound' gameAssets}}âœ… Valid{{else}}âŒ Invalid{{/validateAsset}}"
  
  - "=== Testing Missing Assets ==="
  - "Missing Asset: {{#validateAsset 'nonexistent' gameAssets}}âŒ Valid{{else}}âœ… Invalid (Expected){{/validateAsset}}"
  - "Empty Key: {{#validateAsset '' gameAssets}}âŒ Valid{{else}}âœ… Invalid (Expected){{/validateAsset}}"
  
  - "=== URL Resolution Test ==="
  - "Hero URL: {{#if (resolveAsset 'hero_portrait' gameAssets)}}âœ… Resolved{{else}}âŒ Failed{{/if}}"
  - "Audio URL: {{#if (resolveAsset 'theme_music' gameAssets)}}âœ… Resolved{{else}}âŒ Failed{{/if}}"
  - "Missing URL: {{#if (resolveAsset 'missing' gameAssets)}}âŒ Resolved{{else}}âœ… Failed (Expected){{/if}}"
  
  - goto: main_menu

main_menu:
  - "ğŸ  **Main Menu**"
  - text: "What would you like to test next?"
    choices:
      - text: "Character Portraits"
        goto: character_test
      - text: "Background Images" 
        goto: background_test
      - text: "Audio System"
        goto: audio_test
      - text: "Asset Information"
        goto: asset_info_test
      - text: "Asset Validation"
        goto: validation_test
      - text: "Finish Demo"
        goto: conclusion

conclusion:
  - "ğŸ‰ **Asset Demo Complete!**"
  - "You've successfully tested with real, working URLs:"
  - "â€¢ âœ… Random images from Picsum Photos service"
  - "â€¢ âœ… Real audio files from SoundJay"
  - "â€¢ âœ… Asset detection and validation"
  - "â€¢ âœ… Image display with HTML generation"
  - "â€¢ âœ… Audio playback with controls"
  - "â€¢ âœ… File size formatting"
  - "â€¢ âœ… Media type detection"
  - "â€¢ âœ… Key normalization"
  - "â€¢ âœ… URL resolution"
  
  - "**Final Asset Statistics:**"
  - "â€¢ Assets loaded: {{assetCount gameAssets}}"
  - "â€¢ Total size: {{formatFileSize 610000}}"
  - "â€¢ Image assets: 4"
  - "â€¢ Audio assets: 2"
  
  - "All URLs are working and will load real content! ğŸ­âœ¨"