setup:
  - actions:
      - type: setVar
        key: demoAssets
        value:
          - id: "hero_portrait"
            name: "hero.jpg"
            url: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=400&fit=crop&crop=face"
            size: 52000
            category: "portrait"
          - id: "warrior_portrait"  
            name: "warrior.jpg"
            url: "https://images.unsplash.com/photo-1566492031773-4f4e44671d66?w=300&h=400&fit=crop&crop=face"
            size: 48000
            category: "portrait"
          - id: "mage_portrait"
            name: "mage.jpg"
            url: "https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=300&h=400&fit=crop&crop=face"
            size: 45000
            category: "portrait"
            
          - id: "forest_bg"
            name: "forest.jpg"
            url: "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=800&h=600&fit=crop"
            size: 180000
            category: "background"
          - id: "castle_bg"
            name: "castle.jpg" 
            url: "https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=800&h=600&fit=crop"
            size: 220000
            category: "background"
          - id: "tavern_bg"
            name: "tavern.jpg"
            url: "https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=800&h=600&fit=crop"
            size: 195000
            category: "background"
            
          - id: "ambient_forest"
            name: "forest_ambience.mp3"
            url: "https://opengameart.org/sites/default/files/forest_ambience_0.mp3"
            size: 1200000
            category: "audio"
          - id: "sword_clash"
            name: "sword_sound.wav"
            url: "https://freesound.org/data/previews/316/316847_5247576-hq.mp3"
            size: 85000
            category: "audio"
          - id: "magic_spell"
            name: "spell_cast.wav"
            url: "https://freesound.org/data/previews/270/270407_5123451-hq.mp3"
            size: 65000
            category: "audio"

intro:
  - "ğŸ¨ **VN Engine Asset Management Demo**"
  - "Welcome to the comprehensive asset system demonstration!"
  
  - "ğŸ“Š **Asset Library Overview:**"
  - "â€¢ Total Assets: {{assetCount demoAssets}}"
  - "â€¢ Portraits: 3 characters"
  - "â€¢ Backgrounds: 3 scenic locations" 
  - "â€¢ Audio: 3 immersive sounds"
  - "â€¢ Combined Size: {{formatFileSize 2690000}}"
  
  - "âœ¨ All assets use real, working URLs from trusted sources:"
  - "â€¢ **Images**: Unsplash (Creative Commons)"
  - "â€¢ **Audio**: OpenGameArt & Freesound (CC Licensed)"
  
  - text: "Choose your adventure path:"
    choices:
      - text: "ğŸ§™â€â™‚ï¸ Meet the Characters"
        goto: character_showcase
      - text: "ğŸ° Explore Locations"
        goto: location_showcase
      - text: "ğŸµ Audio Experience"
        goto: audio_showcase
      - text: "ğŸ”§ Technical Demo"
        goto: technical_demo
      - text: "ğŸ“‹ Asset Information"
        goto: asset_library

character_showcase:
  - "ğŸ‘¥ **Character Portrait Gallery**"
  - "Meet the heroes of our story with real portrait photography!"
  
  - "**Hero Introduction:**"
  - "{{showImage 'hero_portrait' demoAssets 'The Hero' 'character-portrait'}}"
  - speaker: "Hero"
    say: "Greetings! I'm your protagonist, ready for adventure!"
  - "Portrait Details:"
  - "â€¢ Source: Professional headshot from Unsplash"
  - "â€¢ Type: {{getMediaType 'hero.jpg'}}"
  - "â€¢ Size: {{formatFileSize 52000}}"
  - "â€¢ Valid: {{#validateAsset 'hero_portrait' demoAssets}}âœ… Confirmed{{else}}âŒ Error{{/validateAsset}}"
  
  - text: "Meet another character?"
    choices:
      - text: "âš”ï¸ The Warrior"
        goto: warrior_intro
      - text: "ğŸ”® The Mage"
        goto: mage_intro
      - text: "ğŸ  Return to Menu"
        goto: main_menu

warrior_intro:
  - "âš”ï¸ **The Warrior Appears**"
  - "{{showImage 'warrior_portrait' demoAssets 'The Warrior' 'character-portrait'}}"
  - speaker: "Warrior"
    say: "Well met! My blade is sharp and my resolve unwavering!"
  
  - "Asset Information:"
  - "â€¢ File: warrior.jpg"
  - "â€¢ Type: {{getMediaType 'warrior.jpg'}}"
  - "â€¢ Size: {{formatFileSize 48000}}"
  - "â€¢ Status: {{#hasAsset 'warrior_portrait' demoAssets}}âœ… Loaded{{else}}âŒ Missing{{/hasAsset}}"
  - goto: character_showcase

mage_intro:
  - "ğŸ”® **The Mage Materializes**"
  - "{{showImage 'mage_portrait' demoAssets 'The Mage' 'character-portrait'}}"
  - speaker: "Mage"
    say: "The arcane energies flow through me. Magic shall light our way!"
  
  - "Asset Information:"
  - "â€¢ File: mage.jpg"
  - "â€¢ Type: {{getMediaType 'mage.jpg'}}"
  - "â€¢ Size: {{formatFileSize 45000}}"
  - "â€¢ Normalized: {{normalizeKey 'mage.jpg'}}"
  - goto: character_showcase

location_showcase:
  - "ğŸ—ºï¸ **World Exploration**"
  - "Discover beautiful locations with stunning photography!"
  
  - text: "Where shall we venture first?"
    choices:
      - text: "ğŸŒ² Enchanted Forest"
        goto: forest_location
      - text: "ğŸ° Ancient Castle"
        goto: castle_location
      - text: "ğŸº Cozy Tavern"
        goto: tavern_location
      - text: "ğŸ”™ Back to Menu"
        goto: main_menu

forest_location:
  - "ğŸŒ² **Deep in the Enchanted Forest**"
  - "{{showImage 'forest_bg' demoAssets 'Mystical Forest Path' 'scene-background'}}"
  - "The ancient trees whisper secrets as dappled sunlight filters through the canopy..."
  
  - "Location Details:"
  - "â€¢ Scene: Mystical woodland path"
  - "â€¢ Type: {{getMediaType 'forest.jpg'}}"
  - "â€¢ Resolution: High-quality nature photography"
  - "â€¢ Size: {{formatFileSize 180000}}"
  - "â€¢ Source: Unsplash nature collection"
  
  - text: "What do you do?"
    choices:
      - text: "ğŸµ Listen to forest sounds"
        goto: forest_audio
      - text: "ğŸ—ºï¸ Explore other locations"
        goto: location_showcase

forest_audio:
  - "ğŸµ **Forest Ambience**"
  - "{{playAudio 'ambient_forest' demoAssets true true}}"
  - "The forest comes alive with natural sounds - birds chirping, leaves rustling, distant water flowing..."
  - "â€¢ Audio Type: {{getMediaType 'forest_ambience.mp3'}}"
  - "â€¢ Loop: Enabled for continuous ambience"
  - "â€¢ Size: {{formatFileSize 1200000}}"
  - goto: location_showcase

castle_location:
  - "ğŸ° **The Ancient Castle**"
  - "{{showImage 'castle_bg' demoAssets 'Majestic Castle' 'scene-background'}}"
  - "Towering stone walls rise before you, weathered by centuries but still magnificent..."
  
  - "Location Details:"
  - "â€¢ Architecture: Medieval fortress"
  - "â€¢ Type: {{getMediaType 'castle.jpg'}}"
  - "â€¢ Size: {{formatFileSize 220000}}"
  - "â€¢ Valid: {{#validateAsset 'castle_bg' demoAssets}}âœ… Available{{else}}âŒ Missing{{/validateAsset}}"
  - goto: location_showcase

tavern_location:
  - "ğŸº **The Friendly Tavern**"
  - "{{showImage 'tavern_bg' demoAssets 'Warm Tavern Interior' 'scene-background'}}"
  - "Warm light spills from windows as laughter and conversation drift from within..."
  
  - "Location Details:"
  - "â€¢ Atmosphere: Cozy and welcoming"
  - "â€¢ Type: {{getMediaType 'tavern.jpg'}}"
  - "â€¢ Size: {{formatFileSize 195000}}"
  - "â€¢ Mood: Perfect for gathering and planning"
  - goto: location_showcase

audio_showcase:
  - "ğŸµ **Immersive Audio Experience**"
  - "Experience the power of sound with real audio assets!"
  
  - text: "Which audio would you like to experience?"
    choices:
      - text: "ğŸŒ² Forest Ambience"
        goto: test_forest_audio
      - text: "âš”ï¸ Sword Combat"
        goto: test_combat_audio
      - text: "ğŸ”® Magic Spell"
        goto: test_magic_audio
      - text: "ğŸ”‡ Audio Information Only"
        goto: audio_info
      - text: "ğŸ  Main Menu"
        goto: main_menu

test_forest_audio:
  - "ğŸŒ² **Forest Ambience Playing**"
  - "{{playAudio 'ambient_forest' demoAssets true true}}"
  - "Immerse yourself in the peaceful sounds of nature..."
  - "â€¢ Source: OpenGameArt community"
  - "â€¢ License: Creative Commons"
  - "â€¢ Format: {{getMediaType 'forest_ambience.mp3'}}"
  - "â€¢ Loop: âœ… Continuous playback"
  - goto: audio_showcase

test_combat_audio:
  - "âš”ï¸ **Combat Sound Effect**"
  - "{{playAudio 'sword_clash' demoAssets true false}}"
  - "Steel rings against steel in epic battle!"
  - "â€¢ Effect: Sword clash"
  - "â€¢ Format: {{getMediaType 'sword_sound.wav'}}"
  - "â€¢ Size: {{formatFileSize 85000}}"
  - "â€¢ Loop: âŒ Single play"
  - goto: audio_showcase

test_magic_audio:
  - "ğŸ”® **Mystical Spell Casting**"
  - "{{playAudio 'magic_spell' demoAssets true false}}"
  - "Arcane energies crackle through the air!"
  - "â€¢ Effect: Spell casting"
  - "â€¢ Format: {{getMediaType 'spell_cast.wav'}}"
  - "â€¢ Size: {{formatFileSize 65000}}"
  - "â€¢ Source: Freesound community"
  - goto: audio_showcase

audio_info:
  - "ğŸ“‹ **Audio Asset Information**"
  - "**Forest Ambience:**"
  - "â€¢ Type: {{getMediaType 'forest_ambience.mp3'}}"
  - "â€¢ Size: {{formatFileSize 1200000}}"
  - "â€¢ Valid: {{#validateAsset 'ambient_forest' demoAssets}}âœ…{{else}}âŒ{{/validateAsset}}"
  - "â€¢ URL: {{#if (resolveAsset 'ambient_forest' demoAssets)}}âœ… Available{{else}}âŒ Missing{{/if}}"
  
  - "**Sword Combat:**"
  - "â€¢ Type: {{getMediaType 'sword_sound.wav'}}"
  - "â€¢ Size: {{formatFileSize 85000}}"
  - "â€¢ Valid: {{#validateAsset 'sword_clash' demoAssets}}âœ…{{else}}âŒ{{/validateAsset}}"
  
  - "**Magic Spell:**"
  - "â€¢ Type: {{getMediaType 'spell_cast.wav'}}"
  - "â€¢ Size: {{formatFileSize 65000}}"
  - "â€¢ Valid: {{#validateAsset 'magic_spell' demoAssets}}âœ…{{else}}âŒ{{/validateAsset}}"
  - goto: audio_showcase

technical_demo:
  - "ğŸ”§ **Technical Asset Management Demo**"
  - "Explore the powerful asset helper functions in action!"
  
  - "=== Asset Detection Tests ==="
  - "Hero Portrait: {{#hasAsset 'hero_portrait' demoAssets}}âœ… Found{{else}}âŒ Missing{{/hasAsset}}"
  - "Warrior Portrait: {{#hasAsset 'warrior_portrait' demoAssets}}âœ… Found{{else}}âŒ Missing{{/hasAsset}}"
  - "Castle Background: {{#hasAsset 'castle_bg' demoAssets}}âœ… Found{{else}}âŒ Missing{{/hasAsset}}"
  - "Forest Audio: {{#hasAsset 'ambient_forest' demoAssets}}âœ… Found{{else}}âŒ Missing{{/hasAsset}}"
  
  - "=== Missing Asset Tests (Should Fail) ==="
  - "Nonexistent Asset: {{#hasAsset 'missing_asset' demoAssets}}âŒ Found{{else}}âœ… Not Found{{/hasAsset}}"
  - "Empty Key: {{#hasAsset '' demoAssets}}âŒ Found{{else}}âœ… Not Found{{/hasAsset}}"
  
  - "=== URL Resolution Tests ==="
  - "Hero URL: {{#if (resolveAsset 'hero_portrait' demoAssets)}}âœ… Resolved{{else}}âŒ Failed{{/if}}"
  - "Forest Audio URL: {{#if (resolveAsset 'ambient_forest' demoAssets)}}âœ… Resolved{{else}}âŒ Failed{{/if}}"
  - "Missing URL: {{#if (resolveAsset 'nonexistent' demoAssets)}}âŒ Found{{else}}âœ… Failed (Expected){{/if}}"
  
  - "=== Helper Function Tests ==="
  - "File Size Formatting:"
  - "â€¢ 1024 bytes â†’ {{formatFileSize 1024}}"
  - "â€¢ 1 MB â†’ {{formatFileSize 1048576}}"
  - "â€¢ 2.5 MB â†’ {{formatFileSize 2621440}}"
  
  - "Media Type Detection:"
  - "â€¢ hero.jpg â†’ {{getMediaType 'hero.jpg'}}"
  - "â€¢ forest_ambience.mp3 â†’ {{getMediaType 'forest_ambience.mp3'}}"
  - "â€¢ spell_cast.wav â†’ {{getMediaType 'spell_cast.wav'}}"
  - "â€¢ document.txt â†’ {{getMediaType 'document.txt'}}"
  
  - "Key Normalization:"
  - "â€¢ 'Hero Portrait.JPG' â†’ {{normalizeKey 'Hero Portrait.JPG'}}"
  - "â€¢ 'Forest Background.png' â†’ {{normalizeKey 'Forest Background.png'}}"
  
  - goto: main_menu

asset_library:
  - "ğŸ“š **Complete Asset Library**"
  
  - "=== Character Portraits ==="
  - "**Hero Portrait:**"
  - "â€¢ ID: hero_portrait | File: hero.jpg"
  - "â€¢ Type: {{getMediaType 'hero.jpg'}} | Size: {{formatFileSize 52000}}"
  - "â€¢ Status: {{#validateAsset 'hero_portrait' demoAssets}}âœ… Valid{{else}}âŒ Invalid{{/validateAsset}}"
  - "â€¢ Source: Unsplash Professional Headshots"
  
  - "**Warrior Portrait:**"
  - "â€¢ ID: warrior_portrait | File: warrior.jpg"
  - "â€¢ Type: {{getMediaType 'warrior.jpg'}} | Size: {{formatFileSize 48000}}"
  - "â€¢ Status: {{#validateAsset 'warrior_portrait' demoAssets}}âœ… Valid{{else}}âŒ Invalid{{/validateAsset}}"
  - "â€¢ Source: Unsplash Character Photography"
  
  - "**Mage Portrait:**"
  - "â€¢ ID: mage_portrait | File: mage.jpg"
  - "â€¢ Type: {{getMediaType 'mage.jpg'}} | Size: {{formatFileSize 45000}}"
  - "â€¢ Status: {{#validateAsset 'mage_portrait' demoAssets}}âœ… Valid{{else}}âŒ Invalid{{/validateAsset}}"
  - "â€¢ Source: Unsplash Portrait Collection"
  
  - "=== Background Images ==="
  - "**Forest Background:**"
  - "â€¢ ID: forest_bg | File: forest.jpg"
  - "â€¢ Type: {{getMediaType 'forest.jpg'}} | Size: {{formatFileSize 180000}}"
  - "â€¢ Status: {{#validateAsset 'forest_bg' demoAssets}}âœ… Valid{{else}}âŒ Invalid{{/validateAsset}}"
  - "â€¢ Source: Unsplash Nature Photography"
  
  - "**Castle Background:**"
  - "â€¢ ID: castle_bg | File: castle.jpg" 
  - "â€¢ Type: {{getMediaType 'castle.jpg'}} | Size: {{formatFileSize 220000}}"
  - "â€¢ Status: {{#validateAsset 'castle_bg' demoAssets}}âœ… Valid{{else}}âŒ Invalid{{/validateAsset}}"
  - "â€¢ Source: Unsplash Architecture Collection"
  
  - "**Tavern Background:**"
  - "â€¢ ID: tavern_bg | File: tavern.jpg"
  - "â€¢ Type: {{getMediaType 'tavern.jpg'}} | Size: {{formatFileSize 195000}}"
  - "â€¢ Status: {{#validateAsset 'tavern_bg' demoAssets}}âœ… Valid{{else}}âŒ Invalid{{/validateAsset}}"
  - "â€¢ Source: Unsplash Interior Photography"
  
  - "=== Audio Assets ==="
  - "**Forest Ambience:**"
  - "â€¢ ID: ambient_forest | File: forest_ambience.mp3"
  - "â€¢ Type: {{getMediaType 'forest_ambience.mp3'}} | Size: {{formatFileSize 1200000}}"
  - "â€¢ Status: {{#validateAsset 'ambient_forest' demoAssets}}âœ… Valid{{else}}âŒ Invalid{{/validateAsset}}"
  - "â€¢ Source: OpenGameArt Community (CC Licensed)"
  
  - "**Sword Combat:**"
  - "â€¢ ID: sword_clash | File: sword_sound.wav"
  - "â€¢ Type: {{getMediaType 'sword_sound.wav'}} | Size: {{formatFileSize 85000}}"
  - "â€¢ Status: {{#validateAsset 'sword_clash' demoAssets}}âœ… Valid{{else}}âŒ Invalid{{/validateAsset}}"
  - "â€¢ Source: Freesound Community (CC Licensed)"
  
  - "**Magic Spell:**"
  - "â€¢ ID: magic_spell | File: spell_cast.wav"
  - "â€¢ Type: {{getMediaType 'spell_cast.wav'}} | Size: {{formatFileSize 65000}}"
  - "â€¢ Status: {{#validateAsset 'magic_spell' demoAssets}}âœ… Valid{{else}}âŒ Invalid{{/validateAsset}}"
  - "â€¢ Source: Freesound Community (CC Licensed)"
  
  - goto: main_menu

main_menu:
  - "ğŸ  **Main Menu**"
  - text: "What would you like to explore next?"
    choices:
      - text: "ğŸ‘¥ Character Gallery"
        goto: character_showcase
      - text: "ğŸ—ºï¸ Location Tour"
        goto: location_showcase
      - text: "ğŸµ Audio Experience"
        goto: audio_showcase
      - text: "ğŸ”§ Technical Demo"
        goto: technical_demo
      - text: "ğŸ“š Asset Library"
        goto: asset_library
      - text: "ğŸ‰ Demo Complete"
        goto: conclusion

conclusion:
  - "ğŸ‰ **VN Engine Asset Demo Complete!**"
  - "You've successfully experienced the full asset management system!"
  
  - "âœ… **Features Demonstrated:**"
  - "â€¢ **{{assetCount demoAssets}} Real Assets** from trusted open-source providers"
  - "â€¢ **Asset Detection** with {{hasAsset}} helper"
  - "â€¢ **Image Display** with {{showImage}} helper"
  - "â€¢ **Audio Playback** with {{playAudio}} helper"
  - "â€¢ **Asset Validation** with {{validateAsset}} helper"
  - "â€¢ **URL Resolution** with {{resolveAsset}} helper"
  - "â€¢ **File Size Formatting** with {{formatFileSize}} helper"
  - "â€¢ **Media Type Detection** with {{getMediaType}} helper"
  - "â€¢ **Key Normalization** with {{normalizeKey}} helper"
  
  - "ğŸŒ **Open Source Asset Sources:**"
  - "â€¢ **Unsplash**: High-quality photography (CC0 License)"
  - "â€¢ **OpenGameArt**: Game audio assets (CC Licensed)"
  - "â€¢ **Freesound**: Sound effects community (CC Licensed)"
  
  - "ğŸ“Š **Final Statistics:**"
  - "â€¢ Total Assets: {{assetCount demoAssets}}"
  - "â€¢ Total Size: {{formatFileSize 2690000}}"
  - "â€¢ Image Assets: 6 (3 portraits + 3 backgrounds)"
  - "â€¢ Audio Assets: 3 (ambience + sound effects)"
  - "â€¢ All URLs: âœ… Real and functional"
  - "â€¢ All Licenses: âœ… Open source compatible"
  
  - "ğŸ­ **The VN Engine asset system is fully operational!**"
  - "Thank you for exploring our comprehensive asset management demo!"